# 实验报告3_201810413027
## asciinema录屏
### Systemd 入门教程：命令篇
123. [由来&Systemd 概述&系统管理](https://asciinema.org/a/yV90WwbOOPDgH9Dj44TuL74DC)   
asciinema rec:开始录制  
sudo apt install apache2：安装Apache2（准备工作中已完成）  
重启，关机系统等命令asciinema不能录制，但已在实际操作中复现    
4. [Unit]( https://asciinema.org/a/BouX3RmgGh1Zsf3MvT6wEl9x9
)  
5. [Unit 的配置文件]( https://asciinema.org/a/xUJyXtVNknEkjtKmX5V3cE69J
)  
sudo apt install clamv：安装clamv（准备工作中已完成）  
部分服务not exist使用其他服务代替操作    
67. [Target&日志管理](https://asciinema.org/a/VJs7uTT6maiThNRRvOTbEAcGK
)  
部分操作参数做了修改（如指定日志文件保存多久设置为6个月。原设置为1年）  


### Systemd 入门教程：实战篇
[录像]( https://asciinema.org/a/Vii6H5zAYUkYFfEAKGwddbkLL
)



## 自查清单
#### 如何添加一个用户并使其具备sudo执行程序的权限？
    ```
    sudo adduser username
    useradd username -m -s /bin/bash -d /home/username -g groupname
    sudo passwd username
    ```
```
vi etc//etc/sudoers
root ALL=(ALL:ALL) ALLusername ALL=(ALL:ALL) ALL
```
`:wq!`

#### 如何将一个用户添加到一个用户组？

`usermod -a -G groupname username`

#### 如何查看当前系统的分区表和文件系统详细信息？
 `fdisk -l`
  `df -lh`

#### 如何实现开机自动挂载Virtualbox的共享目录分区？
  
#### 基于LVM（逻辑分卷管理）的分区如何实现动态扩容和缩减容量？

 root权限下：
* 动态扩容：
  + 逻辑卷LV扩容:` lvextend -L +容量+磁盘`;
  + 文件系统扩容:ext4文件系统扩容使用`resize2fs [逻辑卷名称]`，xfs文件系统扩容使用`xfs_growfs 挂载点"`
* 缩减容量：`lvreduce -L -r +容量+磁盘`

#### 如何通过systemd设置实现在网络连通时运行一个指定脚本，在网络断开时运行另一个脚本？

`ExecStartPost=指定脚本 start`

`ExecStopPost=另一个脚本 start`

#### 如何通过systemd设置实现一个脚本在任何情况下被杀死之后会立即重新启动？实现杀不死？

`sudo systemctl vi +脚本文件名` 

修改配置文件，restart字段设为`always`，保存。
## 困难&疑问
下载实验有关服务（Apache2，clamav等）速度极慢。准备工作下载花费较多时间。（正常的网速为什么下载这些服务速度只有十几KB每秒）
## 参考文献
[Systemd 入门教程：命令篇 by 阮一峰的网络日志](http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html)

[Systemd 入门教程：实战篇 by 阮一峰的网络日志](http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-part-two.html)
